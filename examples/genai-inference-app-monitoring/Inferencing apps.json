{"dashboards" :[{"dashboardId":"ocid1.managementdashboard.oc1..aaaaaaaasn5ts62fxl2ultqaeqokkx3k7luf4wazodbr4rpdjxo2lhn2h4aa","providerId":"management-dashboard","providerName":"Management Dashboard","providerVersion":"3.0.0","tiles":[{"displayName":"Tab Widget Group 1","savedSearchId":"OOBSS-management-dashboard-container","row":0,"column":0,"height":10,"width":12,"nls":{},"uiConfig":{"internalKey":"OOBSS-management-dashboard-container","vizType":"tileContainer","containerInfo":{"layout":{"type":"tab"},"subTiles":[{"displayName":"Overview","savedSearchId":"OOBSS-management-dashboard-container","row":8,"column":0,"height":10,"width":12,"nls":{},"uiConfig":{"internalKey":"OOBSS-management-dashboard-container","vizType":"tileContainer","containerInfo":{"subTiles":[{"displayName":"Sessions","savedSearchId":"OOBSS-APM-ctdw-single-value","row":0,"column":0,"height":2,"width":2,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show traces count_distinct(sessionId) as value"},"description":null},{"displayName":"Unique users","savedSearchId":"OOBSS-APM-ctdw-single-value","row":0,"column":2,"height":2,"width":2,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show spans count_distinct(UserName) as value where UserName is not omitted"},"description":null},{"displayName":"User feedback","savedSearchId":"OOBSS-APM-ctdw-pie-chart","row":0,"column":4,"height":3,"width":3,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show(show spans sessionId, max(genAiFeedback) as genAiFeedback where traceid in (show spans traceid where genAiFeedback is not omitted or genAiService is not omitted first 100000 rows)  group by SessionId) count(*) as value, case when genAiFeedback is omitted then 'no-feedback' else genAiFeedback end as series where sessionid is not omitted group by genAiFeedback","apmQueryCenter":"show traces count_distinct(sessionID) as value where traceid in (show spans traceid where genAiFeedback is not omitted or genAiService is not omitted first 100000 rows) "},"description":"Session counts with and without user feedback"},{"displayName":"Chat invocations","savedSearchId":"OOBSS-APM-ctdw-bar-chart","row":0,"column":7,"height":3,"width":5,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show spans count(*) as value, genAiService as series where OperationName = 'invoke' group by genAiService timeseries"},"description":"number of invoce calls (in langchain)"},{"displayName":"Response time breakdown by genAI service","savedSearchId":"ocid1.managementsavedsearch.oc1..aaaaaaaaucjuzm6lzvajbefipjuu2cqvq2bjcbftzdfcl76ww2dd47uoyfpq","row":2,"column":0,"height":3,"width":4,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)"},"description":"sum of all wait times by the genAi service type"},{"displayName":"Recent sessions","savedSearchId":"OOBSS-APM-trace-table-1","row":3,"column":4,"height":5,"width":8,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","compartmentId":"$(dashboard.params.compartmentId)","apmDomain":"$(dashboard.params.apmDomain)","apmTraceExplorerQuery":"show (spans) min(UserName) as \"User name\",      min(GeoCountry || ', ' || GeoCity) as City,     cast(sum(case when HttpUrlPath = '/invoke' then spanDuration end), 'duration_ms') as \"Total response time\",     conditional_count(HttpUrlPath = '/invoke') as \"GenAI Invocations\",     omittedTo(conditional_count(genAiFeedback = 'thumb-up'),0) as \"Thumb up\",     omittedTo(conditional_count(genAiFeedback = 'thumb-down'),0) as \"Thumb down\",     sum(ErrorCount) as \"Error count\",     max(endTime) - min(startTime) as \"Session duration\",     min(startTime) as \"Session start time\"   where genAiFeedback is not omitted or HttpUrlPath = '/invoke'   group by SessionId   order by min(startTime) "},"description":null},{"displayName":"Questions resulted with a thumb-down","savedSearchId":"OOBSS-APM-trace-table-1","row":5,"column":0,"height":3,"width":4,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","compartmentId":"$(dashboard.params.compartmentId)","apmDomain":"$(dashboard.params.apmDomain)","apmTraceExplorerQuery":"show (spans) genAiQuery, count(*) as Count where genAiFeedback='thumb-down' group by genAiQuery order by count_distinct(SessionID) desc"},"description":null}]}},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{},"description":null},{"displayName":"Perofrmance & Quality","savedSearchId":"OOBSS-management-dashboard-container","row":0,"column":0,"height":10,"width":12,"nls":{},"uiConfig":{"internalKey":"OOBSS-management-dashboard-container","vizType":"tileContainer","containerInfo":{"subTiles":[{"displayName":"__INHERIT__","savedSearchId":"ocid1.managementsavedsearch.oc1..aaaaaaaakovj756ycxdb2t5fkcuu43g5uynbejukf22nghlpdityst6xcwiq","row":0,"column":6,"height":4,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)"},"description":null},{"displayName":"LLM response time by model","savedSearchId":"OOBSS-APM-ctdw-line-chart","row":7,"column":6,"height":3,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show spans genAiModel as series, avg(SpanDuration) as value where OperationName = 'invoke' group by genAiModel timeseries"},"description":null},{"displayName":"User feedback","savedSearchId":"OOBSS-APM-ctdw-bar-chart","row":4,"column":6,"height":3,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show spans count(*) as value, genAiFeedback as series where genAiFeedback is not omitted group by genAiFeedback timeseries"},"description":null},{"displayName":"LLM Question count","savedSearchId":"OOBSS-APM-ctdw-single-value","row":0,"column":0,"height":3,"width":3,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show spans count(*) as value where kind = 'SERVER'  and genAiQuery is not omitted"},"description":null},{"displayName":"__INHERIT__","savedSearchId":"ocid1.managementsavedsearch.oc1..aaaaaaaazha7lmzw2dkio3pb376ybofngtrrarrih6rdwgclkbtyjeacbbmq","row":5,"column":0,"height":5,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)"},"description":null},{"displayName":"Failed to answer","savedSearchId":"ocid1.managementsavedsearch.oc1..aaaaaaaav64yqnzbcdg3ikk7fwfox5goath5ph5xy576wfapjpqv7pxgicqq","row":3,"column":0,"height":2,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)"},"description":null},{"displayName":"User feedback","savedSearchId":"OOBSS-APM-ctdw-pie-chart","row":0,"column":3,"height":3,"width":3,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show(show spans sessionId, max(genAiFeedback) as genAiFeedback where traceid in (show spans traceid where genAiFeedback is not omitted or genAiService is not omitted first 100000 rows)  group by SessionId) count(*) as value, case when genAiFeedback is omitted then 'no-feedback' else genAiFeedback end as series where sessionid is not omitted group by genAiFeedback","apmQueryCenter":"show traces count_distinct(sessionID) as value where traceid in (show spans traceid where genAiFeedback is not omitted or genAiService is not omitted first 100000 rows) "},"description":"Session counts with and without user feedback"}]}},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{},"description":null},{"displayName":"Cost analysis","savedSearchId":"OOBSS-management-dashboard-container","row":0,"column":0,"height":10,"width":12,"nls":{},"uiConfig":{"internalKey":"OOBSS-management-dashboard-container","vizType":"tileContainer","containerInfo":{"subTiles":[{"displayName":"GenAI services cost","savedSearchId":"OOBSS-APM-ctdw-line-with-area-chart","row":4,"column":6,"height":3,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show spans genAiService as series, sum(genAICost) as value where genAICost is not omitted group by genAiService, genAiModel timeseries","stack":"on"},"description":null},{"displayName":"Tokens","savedSearchId":"OOBSS-APM-ctdw-bar-chart","row":2,"column":6,"height":2,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show spans genAiService as series, sum(genAITokens) as value where genAITokens is not omitted group by genAiService timeseries"},"description":"Tokens are calculated per model. Using inbound and outbound as reuqired by the model.\n(this can be adjusted through editing of the relevant span enrichment rules)"},{"displayName":"Top cost users","savedSearchId":"OOBSS-APM-trace-table-1","row":2,"column":0,"height":5,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","compartmentId":"$(dashboard.params.compartmentId)","apmDomain":"$(dashboard.params.apmDomain)","apmTraceExplorerQuery":"show (show spans max(sessionid) as sessionId, max(username) as UserName, sum(genAiCOst) as cost, sum(genAiTokens) as tokens, conditional_count(operationName = 'invoke') as invocations where userName is not omitted or genAiCOst is not omitted group by traceid having count(*) > 3) userName, sum(invocations) as \"LLM Queries\", sum(cost) * 100 as \"Cost ($0.01)\", sum(tokens) as Tokens, count_distinct(sessionId) as Sessions group by userName order by sum(cost) * 100 desc "},"description":"Show total cost (in cents) of genAI models usage by users. \n(Cost per token/query can be adjusted by update of relevant span enrichemnt rules)."},{"displayName":"__INHERIT__","savedSearchId":"ocid1.managementsavedsearch.oc1..aaaaaaaa22tmjrulx3n3gnkti6mhcpbpelo32wzofezsxhstq4vqjhpzlxdq","row":0,"column":6,"height":2,"width":6,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)"},"description":null},{"displayName":"Avg cost per session ($0.01)","savedSearchId":"OOBSS-APM-ctdw-single-value","row":0,"column":0,"height":2,"width":2,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show (show spans sum(genAiCOst) as cost where userName is not omitted or genAiCOst is not omitted group by traceid having count(*) > 3) avg(cost) * 100 as value"},"description":null},{"displayName":"90Th percentile cost","savedSearchId":"OOBSS-APM-ctdw-single-value","row":0,"column":2,"height":2,"width":2,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show (show spans sum(genAiCOst) as cost where userName is not omitted or genAiCOst is not omitted group by traceid having count(*) > 3) percentile(cost, 90) * 100 as value"},"description":null},{"displayName":"Max cost per session","savedSearchId":"OOBSS-APM-ctdw-single-value","row":0,"column":4,"height":2,"width":2,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"time":"$(dashboard.params.time)","apmDomain":"$(dashboard.params.apmDomain)","apmQuery":"show (show spans sum(genAiCOst) as cost where userName is not omitted or genAiCOst is not omitted group by traceid having count(*) > 3) max(cost) * 100 as value"},"description":null}]}},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{},"description":null},{"displayName":"Read me","savedSearchId":"OOBSS-management-dashboard-container","row":0,"column":0,"height":10,"width":12,"nls":{},"uiConfig":{"internalKey":"OOBSS-management-dashboard-container","vizType":"tileContainer","containerInfo":{"subTiles":[{"displayName":" ","savedSearchId":"ocid1.managementsavedsearch.oc1..aaaaaaaafakmyg62ysxtuacexkmaqd3u4s7scenptpjvvuoukqm2xoj7kedq","row":0,"column":0,"height":6,"width":12,"nls":{},"uiConfig":{},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{"compartmentId":"$(dashboard.params.compartmentId)","time":"$(dashboard.params.time)","regionName":"$(context.regionName)","text":"<h2>This dashboard is designed to provide information and analysis of inference applications</h2><br> The dashboard uses tracing data collected from the UI (e.g. chatbot interface) and from the agent/backend service that interacts with the GenAI services;<b> LLM, vector DB, and others</b>.<br><br> Use native instrumentation, OCI APM, OTEL, or other agents to gather the required data from the application. Use span enrichment to add and convert the data to fit into as many of these attributes:<br> <b>     <br>-\tgenAiQuery     <br>-\tgenAiResponse     <br>-\tgenAiService     <br>-\tgenAiFeedback </b> (thumb-up / thumb-down) <b>     <br>-\tgenAiModel     <br>-\tgenAiPromptLength     <br>-\tgenAiResponseLength     <br>-   genAiQueryLength     <br>-\tgenAiConvId </b>"},"description":"  "}]}},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{},"description":null}]}},"dataConfig":[],"state":"DEFAULT","drilldownConfig":[],"parametersMap":{},"description":null}],"displayName":"Inferencing apps","description":"","compartmentId":"ocid1.compartment.oc1..aaaaaaaakbqt5eklbyfomw7mbeqgtsyczrh74mk26cnsnkcuckkmyd6yqjga","isOobDashboard":false,"isShowInHome":false,"metadataVersion":"2.0","isShowDescription":true,"screenImage":"todo: provide value[mandatory]","nls":{},"uiConfig":{"isFilteringEnabled":false,"isTimeRangeEnabled":true,"isRefreshEnabled":true},"dataConfig":[],"type":"normal","isFavorite":false,"savedSearches":[{"id":"ocid1.managementsavedsearch.oc1..aaaaaaaafakmyg62ysxtuacexkmaqd3u4s7scenptpjvvuoukqm2xoj7kedq","displayName":"html widget","providerId":"management-dashboard","providerVersion":"3.0.0","providerName":"Management Dashboard","compartmentId":"ocid1.compartment.oc1..aaaaaaaakbqt5eklbyfomw7mbeqgtsyczrh74mk26cnsnkcuckkmyd6yqjga","isOobSavedSearch":false,"description":"Content is the value of the Text parameter","nls":{},"type":"WIDGET_SHOW_IN_DASHBOARD","uiConfig":{"vizType":"html","htmlInfo":{"text":"$(params.text)"}},"dataConfig":[],"screenImage":"...","metadataVersion":"2.0","widgetTemplate":"visualizations/chartWidgetTemplate.html","widgetVM":"visualizations/chartWidget","freeformTags":{},"definedTags":{},"parametersConfig":[{"name":"time","displayName":"$(bundle.globalSavedSearch.TIME_PARAMETER_NAME)","required":true,"editUi":{"inputType":"savedSearch","filterTile":{"filterId":"OOBSS-management-dashboard-time-selector-filter","parametersMap":{"maxDurationDays":89}}}},{"name":"compartmentId","displayName":"$(bundle.globalSavedSearch.COMPARTMENT)","required":true,"defaultFilterIds":["OOBSS-management-dashboard-compartment-filter"],"valueFormat":{"type":"object"},"editUi":{"inputType":"compartmentSelect"}},{"name":"regionName","displayName":"$(bundle.globalSavedSearch.REGION)","required":false,"defaultFilterIds":["OOBSS-management-dashboard-region-filter"],"valueFormat":{"type":"string"},"editUi":{"inputType":"savedSearch","filterTile":{"filterId":"OOBSS-management-dashboard-region-filter","parametersMap":{"selectionMode":"single"}}}},{"name":"text","required":true,"editUi":{"hideFilterOptions":true},"displayName":"Text"}],"featuresConfig":{"crossService":{"shared":true},"dependencies":[{"libProviderId":"management-dashboard","version":"1.119.0"}],"serviceTypes":["management-dashboard"]},"drilldownConfig":[]},{"id":"ocid1.managementsavedsearch.oc1..aaaaaaaaucjuzm6lzvajbefipjuu2cqvq2bjcbftzdfcl76ww2dd47uoyfpq","displayName":"Time per genAI Service","providerId":"management-dashboard","providerVersion":"3.0.0","providerName":"Management Dashboard","compartmentId":"ocid1.compartment.oc1..aaaaaaaakbqt5eklbyfomw7mbeqgtsyczrh74mk26cnsnkcuckkmyd6yqjga","isOobSavedSearch":false,"description":"sum(spanDuration) group by genAiService","nls":{},"type":"WIDGET_SHOW_IN_DASHBOARD","uiConfig":{"vizType":"chart","chartInfo":{"jetConfig":{"type":"bar","orientation":"horizontal"},"colorBy":"_allDimensionConglomerate","value":"totalDuration","group":"genAiService"},"defaultDataSource":"traceData"},"dataConfig":[{"name":"traceData","type":"tracesDataSource","parameters":{"compartmentId":"$(params.compartmentId)","startTime":"$(params.time.start)","endTime":"$(params.time.end)","apmDomain":"$(params.apmDomain)","maxDesiredDataPoints":320,"dimensionFilters":"$(params.flex)","apmQuery":"show spans genAiService, sum(spanDuration) as totalDuration, count(*) as Count where genAiService is not omitted group by genAiService order by sum(spanDuration)","simplifyDataSource":true}}],"screenImage":"...","metadataVersion":"2.0","widgetTemplate":"visualizations/chartWidgetTemplate.html","widgetVM":"visualizations/chartWidget","freeformTags":{},"definedTags":{},"parametersConfig":[{"name":"time","displayName":"Time","required":true,"defaultFilterIds":["OOBSS-management-dashboard-time-selector-filter"],"editUi":{"inputType":"savedSearch","filterTile":{"filterId":"OOBSS-management-dashboard-time-selector-filter"}}},{"name":"apmDomain","displayName":"Apm Domain","required":true,"defaultFilterIds":["OOBSS-APM-domain-filter"],"editUi":{"filterTile":{"filterId":"OOBSS-APM-domain-filter"}}},{"name":"flex"}],"featuresConfig":{"crossService":{"shared":true},"dependencies":[{"libProviderId":"APM","version":"1.5.0"}],"serviceTypes":["APM"]},"drilldownConfig":[]},{"id":"ocid1.managementsavedsearch.oc1..aaaaaaaav64yqnzbcdg3ikk7fwfox5goath5ph5xy576wfapjpqv7pxgicqq","displayName":"Failure to answer","providerId":"management-dashboard","providerVersion":"3.0.0","providerName":"Management Dashboard","compartmentId":"ocid1.compartment.oc1..aaaaaaaakbqt5eklbyfomw7mbeqgtsyczrh74mk26cnsnkcuckkmyd6yqjga","isOobSavedSearch":false,"description":"No resposne, \"I dont know\",  \"provided content does not ... \", etc.","nls":{},"type":"WIDGET_SHOW_IN_DASHBOARD","uiConfig":{"vizType":"chart","chartInfo":{"jetConfig":{"type":"bar","stack":"on","legend":{"rendered":true,"position":"bottom"},"orientation":"horizontal"},"colorBy":"Series","series":"Series","value":"value","group":" "},"defaultDataSource":"traceData"},"dataConfig":[{"name":"traceData","type":"tracesDataSource","parameters":{"compartmentId":"$(params.compartmentId)","startTime":"$(params.time.start)","endTime":"$(params.time.end)","apmDomain":"$(params.apmDomain)","maxDesiredDataPoints":320,"dimensionFilters":"$(params.flex)","apmQuery":"show (show spans case when genAiResponse is omitted then 'no answer' when substr(genAiResponse, 0, 200) like '%I don''t know%' then 'don''t know' else 'provided content doesn''t...' end as Type where kind = 'SERVER' and genAiQuery is not omitted and (substr(genAiResponse, 0, 200) like '%I don''t know%' or regexp_count(substr(genAiResponse, 0, 200), 'provided (context|text) does not') > 0 or genAiResponse is omitted)) type as Series, count(*) as value, 'T' group by type order by count(*)","simplifyDataSource":true}}],"screenImage":"...","metadataVersion":"2.0","widgetTemplate":"visualizations/chartWidgetTemplate.html","widgetVM":"visualizations/chartWidget","freeformTags":{},"definedTags":{},"parametersConfig":[{"name":"time","displayName":"Time","required":true,"defaultFilterIds":["OOBSS-management-dashboard-time-selector-filter"],"editUi":{"inputType":"savedSearch","filterTile":{"filterId":"OOBSS-management-dashboard-time-selector-filter"}}},{"name":"apmDomain","displayName":"Apm Domain","required":true,"defaultFilterIds":["OOBSS-APM-domain-filter"],"editUi":{"filterTile":{"filterId":"OOBSS-APM-domain-filter"}}},{"name":"flex"}],"featuresConfig":{"crossService":{"shared":true},"dependencies":[{"libProviderId":"APM","version":"1.5.0"}],"serviceTypes":["APM"]},"drilldownConfig":[{"source":"title","drawer":{"savedSearchId":"OOBSS-APM-trace-table-1","displayName":"Failure to answer","description":"Queries that were not answered or answered with 'dont know'","size":"large","parametersMap":{"time":"$(dashboard.params.time)","compartmentId":"$(dashboard.params.compartmentId)","apmDomain":"$(dashboard.params.apmDomain)","apmTraceExplorerQuery":"show spans genAiQuery, genAiResponse where kind = 'SERVER' and genAiQuery is not omitted and (substr(genAiResponse, 0, 200) like '%I don''t know%' or regexp_count(substr(genAiResponse, 0, 200), 'provided (context|text) does not') > 0 or genAiResponse is omitted)"}}}]},{"id":"ocid1.managementsavedsearch.oc1..aaaaaaaazha7lmzw2dkio3pb376ybofngtrrarrih6rdwgclkbtyjeacbbmq","displayName":"Response divergence","providerId":"management-dashboard","providerVersion":"3.0.0","providerName":"Management Dashboard","compartmentId":"ocid1.compartment.oc1..aaaaaaaakbqt5eklbyfomw7mbeqgtsyczrh74mk26cnsnkcuckkmyd6yqjga","isOobSavedSearch":false,"description":"Show number of count of differnt answers to the same question.\nDrilldown to see the diverge answers","nls":{},"type":"WIDGET_SHOW_IN_DASHBOARD","uiConfig":{"vizType":"table","tableInfo":{"cols":[{"val":"genAiQuery","header":{"name":"LLM Query"},"sortable":"disable"},{"val":"Count","header":{"name":"Count"},"sortable":"disable"},{"val":"Divergence","header":{"name":"Divergence"},"sortable":"disable","drilldownConfig":{"drawer":{"savedSearchId":"ocid1.managementsavedsearch.oc1..aaaaaaaar7ohdt2x5p46q5l5kf7amxb4y3ugonv7f2sbtbbwpd7fcoy2ymaa","displayName":"$(row.genAiQuery)","description":"List of answers to the same question, orderd by first appearance. Drilldown to Tracae Explorer to see more information.","size":"large","parametersMap":{"time":"$(dashboard.params.time)","compartmentId":"$(dashboard.params.compartmentId)","apmDomain":"$(dashboard.params.apmDomain)","TQL":"SHOW SPANS min(startTime) as \"First Seen\", genAiResponse as Response WHERE kind='SERVER' AND genAiQuery ='$(row.genAiQuery)' group by genAiResponse order by min(startTime) asc"}}}}]},"defaultDataSource":"traceData"},"dataConfig":[{"name":"traceData","type":"tracesDataSource","parameters":{"compartmentId":"$(params.compartmentId)","startTime":"$(params.time.start)","endTime":"$(params.time.end)","apmDomain":"$(params.apmDomain)","maxDesiredDataPoints":320,"dimensionFilters":"$(params.flex)","apmQuery":"show spans genAiQuery, count(*) as Count, count_distinct(genAiResponse) as Divergence where kind='SERVER' and genAiQuery is not omitted and genAiResponse is not omitted group by genAiQuery having count(*) > 1 order by count(*)","simplifyDataSource":true}}],"screenImage":"...","metadataVersion":"2.0","widgetTemplate":"visualizations/chartWidgetTemplate.html","widgetVM":"visualizations/chartWidget","freeformTags":{},"definedTags":{},"parametersConfig":[{"name":"time","displayName":"Time","required":true,"defaultFilterIds":["OOBSS-management-dashboard-time-selector-filter"],"editUi":{"inputType":"savedSearch","filterTile":{"filterId":"OOBSS-management-dashboard-time-selector-filter"}}},{"name":"apmDomain","displayName":"Apm Domain","required":true,"defaultFilterIds":["OOBSS-APM-domain-filter"],"editUi":{"filterTile":{"filterId":"OOBSS-APM-domain-filter"}}},{"name":"flex"}],"featuresConfig":{"crossService":{"shared":true},"dependencies":[{"libProviderId":"APM","version":"1.5.0"}],"serviceTypes":["APM"]},"drilldownConfig":[]},{"id":"ocid1.managementsavedsearch.oc1..aaaaaaaakovj756ycxdb2t5fkcuu43g5uynbejukf22nghlpdityst6xcwiq","displayName":"Thumb up/down by response time and answer length","providerId":"management-dashboard","providerVersion":"3.0.0","providerName":"Management Dashboard","compartmentId":"ocid1.compartment.oc1..aaaaaaaakbqt5eklbyfomw7mbeqgtsyczrh74mk26cnsnkcuckkmyd6yqjga","isOobSavedSearch":false,"description":"Is there a correlation between response length and user satisfaction? ","nls":{},"type":"WIDGET_SHOW_IN_DASHBOARD","uiConfig":{"vizType":"chart","chartInfo":{"jetConfig":{"type":"bubble","valueFormats":{"group":{"tooltipDisplay":"off"},"series":{"tooltipDisplay":"off"},"x":{"tooltipLabel":"ResponseLength_center"},"y":{"tooltipLabel":"ResponseLatency_center"},"z":{"tooltipLabel":"Count"}},"legend":{"rendered":true,"position":"end"},"xAxis":{"title":"Response length"},"yAxis":{"title":"Response latency"}},"colorBy":"genAiFeedback","x":"ResponseLength_center","y":"ResponseLatency_center","z":"Count"},"defaultDataSource":"traceData"},"dataConfig":[{"name":"traceData","type":"tracesDataSource","parameters":{"compartmentId":"$(params.compartmentId)","startTime":"$(params.time.start)","endTime":"$(params.time.end)","apmDomain":"$(params.apmDomain)","maxDesiredDataPoints":320,"dimensionFilters":"$(params.flex)","apmQuery":"cluster by SHOW SPANS  max(genAiResponseLength) as ResponseLength, omittedTo(max(genAiFeedback), 'no-feedback') as genAiFeedback, max(case when kind='SERVER' then SpanDuration end) as ResponseLatency where (kind='SERVER' and genAiConvId is not omitted) or genAiFeedback is not omitted group by case when  kind='SERVER' then genAiConvId else sessionid end, genAiQuery","simplifyDataSource":true}}],"screenImage":"...","metadataVersion":"2.0","widgetTemplate":"visualizations/chartWidgetTemplate.html","widgetVM":"visualizations/chartWidget","freeformTags":{},"definedTags":{},"parametersConfig":[{"name":"time","displayName":"Time","required":true,"defaultFilterIds":["OOBSS-management-dashboard-time-selector-filter"],"editUi":{"inputType":"savedSearch","filterTile":{"filterId":"OOBSS-management-dashboard-time-selector-filter"}}},{"name":"apmDomain","displayName":"Apm Domain","required":true,"defaultFilterIds":["OOBSS-APM-domain-filter"],"editUi":{"filterTile":{"filterId":"OOBSS-APM-domain-filter"}}},{"name":"flex"}],"featuresConfig":{"crossService":{"shared":true},"dependencies":[{"libProviderId":"APM","version":"1.5.0"}],"serviceTypes":["APM"]},"drilldownConfig":[{"drawer":{"savedSearchId":"OOBSS-APM-trace-table-1","displayName":"$(click.row.itemData.genAiFeedback)","parametersMap":{"time":"$(dashboard.params.time)","compartmentId":"$(dashboard.params.compartmentId)","apmDomain":"$(dashboard.params.apmDomain)","apmTraceExplorerQuery":"show traces * where traceid in (show (SHOW SPANS  max(case when  kind='SERVER' then traceid end) as traceid, max(genAiResponseLength) as ResponseLength, omittedTo(max(genAiFeedback), 'no-feedback') as genAiFeedback, max(case when kind='SERVER' then SpanDuration end) as ResponseLatency where (kind='SERVER' and genAiConvId is not omitted) or genAiFeedback is not omitted group by case when  kind='SERVER' then genAiConvId else sessionid end, genAiQuery) traceid where ResponseLength >=  $(click.row.itemData.ResponseLength_min) and responseLength <= $(click.row.itemData.ResponseLength_max) and genAiFeedback = '$(click.row.itemData.genAiFeedback)' and ResponseLatency >= $(click.row.itemData.ResponseLatency_min) and ResponseLatency <= $(click.row.itemData.ResponseLatency_max) first 1000 rows)"}}}]},{"id":"ocid1.managementsavedsearch.oc1..aaaaaaaa22tmjrulx3n3gnkti6mhcpbpelo32wzofezsxhstq4vqjhpzlxdq","displayName":"Cost by genAi model","providerId":"management-dashboard","providerVersion":"3.0.0","providerName":"Management Dashboard","compartmentId":"ocid1.compartment.oc1..aaaaaaaakbqt5eklbyfomw7mbeqgtsyczrh74mk26cnsnkcuckkmyd6yqjga","isOobSavedSearch":false,"description":"using cost per token as configured by span enrichment rules","nls":{},"type":"WIDGET_SHOW_IN_DASHBOARD","uiConfig":{"vizType":"chart","chartInfo":{"jetConfig":{"type":"bar","timeAxisType":"enabled","xAxis":{"viewportStartGroup":"$(params.time.start)","viewportEndGroup":"$(params.time.end)"},"dataCursor":"on","stack":"on","legend":{"rendered":true,"position":"end"}},"value":"timeseries.TotalCost","group":"timeseries.date","colorBy":"genAiModel","series":"genAiModel","enableCorrelation":true},"defaultDataSource":"traceData"},"dataConfig":[{"name":"traceData","type":"tracesDataSource","parameters":{"compartmentId":"$(params.compartmentId)","startTime":"$(params.time.start)","endTime":"$(params.time.end)","apmDomain":"$(params.apmDomain)","maxDesiredDataPoints":320,"dimensionFilters":"$(params.flex)","apmQuery":"show spans genAiModel, sum(genAiCost) as TotalCost where genAiModel is not omitted group by genAiModel timeseries","simplifyDataSource":true}}],"screenImage":"...","metadataVersion":"2.0","widgetTemplate":"visualizations/chartWidgetTemplate.html","widgetVM":"visualizations/chartWidget","freeformTags":{},"definedTags":{},"parametersConfig":[{"name":"time","displayName":"Time","required":true,"defaultFilterIds":["OOBSS-management-dashboard-time-selector-filter"],"editUi":{"inputType":"savedSearch","filterTile":{"filterId":"OOBSS-management-dashboard-time-selector-filter"}}},{"name":"apmDomain","displayName":"Apm Domain","required":true,"defaultFilterIds":["OOBSS-APM-domain-filter"],"editUi":{"filterTile":{"filterId":"OOBSS-APM-domain-filter"}}},{"name":"flex"}],"featuresConfig":{"crossService":{"shared":true},"dependencies":[{"libProviderId":"APM","version":"1.5.0"}],"serviceTypes":["APM"]},"drilldownConfig":[]}],"parametersConfig":[{"savedSearchId":"OOBSS-management-dashboard-compartment-filter","width":2,"state":"DEFAULT","parametersMap":{"isStoreInLocalStorage":false,"isActiveCompartment":"true"},"name":"compartmentId","localStorageKey":"compartmentId"},{"savedSearchId":"OOBSS-APM-domain-filter","width":2,"state":"DEFAULT","parametersMap":{"isStoreInLocalStorage":true,"compartmentId":"$(dashboard.params.compartmentId)"},"name":"apmDomain","localStorageKey":"apmDomain"},{"name":"time","displayName":"$(bundle.globalSavedSearch.TIME)","src":"$(context.time)"}],"featuresConfig":{"crossService":{"shared":true},"serviceTypes":["APM","management-dashboard"],"dependencies":[{"libProviderId":"management-dashboard","version":"1.88.1"}]},"drilldownConfig":[],"freeformTags":{},"definedTags":{}}]}